---
import Layout from '~/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';
import CallToAction from '~/components/widgets/CallToAction.astro';

const metadata = {
  title: 'DatabricksIQ - Intelligent Data Governance',
};
---

<Layout metadata={metadata}>
  <!-- Hero Section ******************* -->
  <section class="relative overflow-hidden">
    <!-- Background Glow -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[500px] bg-blue-500/20 dark:bg-blue-500/10 blur-[100px] rounded-full -z-10"></div>
    
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-16 text-center">
      <p class="text-base text-blue-600 dark:text-blue-400 font-semibold tracking-wide uppercase mb-4">DatabricksIQ</p>
      <h1 class="text-5xl md:text-6xl font-bold tracking-tight mb-6">
        <span class="text-gradient">Intelligent Data Solutions</span>
      </h1>
      <p class="max-w-3xl mx-auto text-xl text-gray-600 dark:text-gray-400 mb-10">
        Unlock the power of your data with our comprehensive governance, cost optimization, and AI readiness framework.
      </p>
      <div class="flex justify-center gap-4">
        <a href="#offers" class="btn-primary">Get Started</a>
        <a href="#framework" class="btn-tertiary">Learn More</a>
      </div>
      

    </div>
  </section>

  <!-- Product Demo Section ******************* -->
  <section class="py-12 bg-gray-50 dark:bg-gray-900/50">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold mb-4">See It in Action</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400">Watch how DatabricksIQ transforms your data governance</p>
      </div>
      
      <div class="relative rounded-2xl overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-700 glass">
        <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl blur opacity-20 -z-10"></div>
        <video 
          id="demo-video"
          controls 
          muted
          playsinline
          class="w-full h-auto rounded-xl"
          poster="/images/dashboard-screenshot.png"
        >
          <source src="/videos/Demo2.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </div>
    </div>
  </section>



  <!-- Governance Framework ******************* -->
  <section id="framework" class="py-20 relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Governance Intelligence Framework</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400">The 6 Pillars of a Governed Lakehouse</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {[
          {
            title: '1. Governance & Metadata',
            desc: 'Catalogs, tables, ownership, lineage.',
            metrics: '% tables with owners, lineage coverage',
            icon: 'tabler:database',
            color: 'text-blue-500'
          },
          {
            title: '2. Compute & Policy Control',
            desc: 'Cluster and policy hygiene.',
            metrics: '% clusters with policy, auto-termination',
            icon: 'tabler:server',
            color: 'text-green-500'
          },
          {
            title: '3. Automation & Workflow',
            desc: 'Jobs, pipelines, scheduling.',
            metrics: '% jobs scheduled, # DLT pipelines',
            icon: 'tabler:automation',
            color: 'text-purple-500'
          },
          {
            title: '4. MLOps & Model Lifecycle',
            desc: 'Models, experiments, serving.',
            metrics: '% models in prod, retrain automation',
            icon: 'tabler:chart-dots',
            color: 'text-pink-500'
          },
          {
            title: '5. Security & Access Control',
            desc: 'Groups, secrets, credentials.',
            metrics: '# orphaned credentials, RBAC compliance',
            icon: 'tabler:lock',
            color: 'text-red-500'
          },
          {
            title: '6. Data Architecture & Modeling',
            desc: 'Pipeline design and layer structure.',
            metrics: '% bronze/silver/gold coverage',
            icon: 'tabler:layout-grid',
            color: 'text-orange-500'
          }
        ].map(item => (
          <div class="glass glass-hover p-6 rounded-2xl border-t-4 border-transparent hover:border-blue-500 transition-all">
            <div class={`mb-4 ${item.color}`}>
              <Icon name={item.icon} class="w-10 h-10" />
            </div>
            <h3 class="text-xl font-bold mb-2">{item.title}</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-4">{item.desc}</p>
            <div class="text-sm bg-gray-100 dark:bg-gray-800 p-3 rounded-lg">
              <span class="font-semibold">Metrics:</span> {item.metrics}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Deep Dive Table ******************* -->
  <section class="py-20 bg-gray-50 dark:bg-gray-900/50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-12">
        <h2 class="text-3xl font-bold mb-4">Deep Dive: Data Architecture & Modeling</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400">Ensuring a robust and scalable data foundation</p>
      </div>

      <div class="glass rounded-2xl overflow-hidden">
        <div class="overflow-x-auto">
          <table class="w-full text-left border-collapse">
            <thead>
              <tr class="bg-gray-100/50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700">
                <th class="p-6 font-semibold">Dimension</th>
                <th class="p-6 font-semibold">Measurable Signal</th>
                <th class="p-6 font-semibold hidden md:table-cell">Example Evaluation</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
              {[
                ['Layer Design', 'Table naming convention or UC schema mapping', '≥ 90 % of tables properly layered'],
                ['Pipeline Traceability', 'Presence of lineage edges in UC or DLT', '≥ 80 % lineage completeness'],
                ['Schema Standardization', 'Similarity between schema patterns', '≤ 10 % inconsistent fields'],
                ['Dimensional Modeling', 'Detect surrogate keys, star/snowflake joins', '≥ 70 % gold tables conform'],
                ['Performance Optimization', 'Delta file count, partitioning', 'Small-file ratio < 5 %'],
                ['Data Quality & Validation', 'DLT expectations, null ratio', '≥ 80 % tables with checks defined']
              ].map(([dim, signal, eval_]) => (
                <tr class="hover:bg-white/50 dark:hover:bg-gray-800/50 transition-colors">
                  <td class="p-6 font-medium text-blue-600 dark:text-blue-400">{dim}</td>
                  <td class="p-6">{signal}</td>
                  <td class="p-6 hidden md:table-cell text-gray-500">{eval_}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <!-- Offers Grid ******************* -->
  <section id="offers" class="py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">Our Offers</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400">Tailored engagements to accelerate your data journey</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {[
          { title: 'Data Governance Quickstart', icon: 'tabler:number-1', desc: '1-week assessment to scan Unity Catalog for policy gaps.' },
          { title: 'Lineage & Quality Diagnostic', icon: 'tabler:number-2', desc: 'Instrument pipelines with lineage tracking and quality alerts.' },
          { title: 'FinOps Accelerator', icon: 'tabler:number-3', desc: 'Identify cost drivers and implement quick wins.' },
          { title: 'Model Governance Boost', icon: 'tabler:number-4', desc: 'Set up a Model Governance Framework and registry.' },
          { title: 'GenAI Risk Assessment', icon: 'tabler:number-5', desc: 'Prompt & Data Exposure Test for LLMs.' },
          { title: 'Compliance Scorecard', icon: 'tabler:number-6', desc: 'Compute a "Governed AI Readiness Score" across 6 pillars.' }
        ].map(offer => (
          <div class="gradient-border p-6 h-full hover:scale-[1.02] transition-transform duration-300">
            <div class="flex items-center gap-4 mb-4">
              <div class="p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400">
                <Icon name={offer.icon} class="w-6 h-6" />
              </div>
              <h3 class="text-lg font-bold leading-tight">{offer.title}</h3>
            </div>
            <p class="text-gray-600 dark:text-gray-400 text-sm">{offer.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Readiness Score Widget ******************* -->
  <section class="py-20 bg-gray-900 text-white relative overflow-hidden">
    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=2072&q=80')] bg-cover bg-center opacity-20"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="flex flex-col md:flex-row items-center gap-12">
        <div class="flex-1">
          <h2 class="text-3xl md:text-4xl font-bold mb-6">Governed AI Readiness Score</h2>
          <p class="text-xl text-gray-300 mb-8">
            We evaluate your environment across 6 critical categories, weighting them to produce a single readiness metric. This provides a clear target and tracks improvement over time.
          </p>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
            <div class="bg-white/10 backdrop-blur p-4 rounded-xl border border-white/20">
              <Icon name="tabler:scoreboard" class="w-8 h-8 mb-2 text-blue-400" />
              <h4 class="font-bold">Comprehensive</h4>
              <p class="text-sm text-gray-400">Composite 0-100 score</p>
            </div>
            <div class="bg-white/10 backdrop-blur p-4 rounded-xl border border-white/20">
              <Icon name="tabler:robot" class="w-8 h-8 mb-2 text-purple-400" />
              <h4 class="font-bold">Automated</h4>
              <p class="text-sm text-gray-400">Machine-checkable metrics</p>
            </div>
            <div class="bg-white/10 backdrop-blur p-4 rounded-xl border border-white/20">
              <Icon name="tabler:list-check" class="w-8 h-8 mb-2 text-green-400" />
              <h4 class="font-bold">Actionable</h4>
              <p class="text-sm text-gray-400">Ranked remediation tasks</p>
            </div>
          </div>
        </div>
        <div class="flex-1 flex justify-center">
          <!-- Gauge Visualization -->
          <div class="relative w-64 h-64">
             <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
              <circle cx="50" cy="50" r="45" fill="none" stroke="#374151" stroke-width="6" />
              <circle cx="50" cy="50" r="45" fill="none" stroke="#ea580c" stroke-width="6" stroke-dasharray="283" stroke-dashoffset="70" stroke-linecap="round" class="drop-shadow-[0_0_15px_rgba(234,88,12,0.5)]" />
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
              <span class="text-6xl font-bold text-white">75</span>
              <span class="text-sm uppercase tracking-wider text-gray-400">Readiness Score</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Contact Me',
        href: 'mailto:ethiraj.k@dataadvisors.ai',
      },
    ]}
    title="Ready to know your score?"
    subtitle="Contact us today to schedule your Governed AI Readiness Assessment."
  />

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const video = document.getElementById('demo-video') as HTMLVideoElement;
      
      if (video) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              video.play().catch((e) => console.log('Autoplay prevented:', e));
            } else {
              video.pause();
            }
          });
        }, { threshold: 0.5 }); // Trigger when 50% visible

        observer.observe(video);
      }
    });
  </script>
</Layout>
